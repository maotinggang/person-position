(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e82feba"],{"21d5":function(n,t,o){},"29f4":function(n,t,o){"use strict";var i=function(){var n=this,t=n.$createElement,o=n._self._c||t;return o("div",[o("baidu-map",{staticClass:"bm-view",style:{paddingRight:n.paddingRight},attrs:{center:n.center,zoom:n.zoom,"scroll-wheel-zoom":!0,"continuous-zoom":!0}},[o("bm-map-type",{attrs:{"map-types":["BMAP_NORMAL_MAP","BMAP_HYBRID_MAP"],anchor:"BMAP_ANCHOR_TOP_LEFT"}}),o("bm-scale",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_LEFT"}}),o("bm-geolocation",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT",showAddressBar:!0,autoLocation:!0}}),o("bm-panorama"),n._l(n.points,function(t,i){return o("bm-marker",{key:i,attrs:{position:{lng:t.lng,lat:t.lat},animation:"BMAP_ANIMATION_DROP",title:t.id,icon:{url:n.config.url+"/img/person.png",size:{width:32,height:32}}},on:{click:function(o){n.handleInfoWindow(t)}}})}),o("bm-info-window",{attrs:{position:{lng:n.pointInfo.lng,lat:n.pointInfo.lat},show:n.show,title:"设备号："+n.pointInfo.id,offset:{width:3,height:-15}},on:{close:n.infoWindowClose,open:n.infoWindowOpen}},[o("span",{staticClass:"point-span"},[o("Row",[o("Col",{attrs:{span:"18"}},[n._v("\n          时间："+n._s(n.pointInfo.time)+"\n          ")]),o("Col",{attrs:{span:"6"}},[n._v("\n          定位："+n._s(n.pointInfo.qf)+"\n          ")])],1),o("Row",[o("Col",{attrs:{span:"12"}},[n._v("\n          经度："+n._s(n.pointInfo.lng)+"\n          ")]),o("Col",{attrs:{span:"12"}},[n._v("\n          纬度："+n._s(n.pointInfo.lat)+"\n          ")])],1),o("Row",[o("Col",{attrs:{span:"8"}},[n._v("\n          高度："+n._s(n.pointInfo.alt)+"\n          ")]),o("Col",{attrs:{span:"8"}},[n._v("\n          速度："+n._s(n.pointInfo.speed)+"\n          ")]),o("Col",{attrs:{span:"8"}},[n._v("\n          方向："+n._s(n.pointInfo.track_true)+"\n          ")])],1)],1)])],2)],1)},a=[],e=(o("ac6a"),o("7514"),o("89a9")),s=o.n(e),r=o("c516"),l=o("00b6"),c=o("4653"),p={props:{paddingRight:{type:String,default:"200px"}},data:function(){return{center:{lng:116.404,lat:39.915},zoom:15,points:[],show:!1,pointInfo:"",config:l}},computed:{},created:function(){var n=this;c["a"].service("position").find({query:{$limit:1,$sort:{time:-1}}}).then(function(t){setTimeout(function(){n.center={lng:t.data[0].lng,lat:t.data[0].lat}},500)}).catch(function(t){n.$Message.error({content:"获取位置错误："+t,duration:10,closable:!0})})},mounted:function(){var n=this;r["a"].$on("device-selected",function(t){var o=s.a.find(n.points,{id:t.id});o?(n.center={lng:o.lng,lat:o.lat},n.zoom=19,n.handleInfoWindow(o)):n.$Message.error({content:"此用户无数据",duration:3,closable:!0})}),setInterval(function(){c["a"].service("position").find({query:{$limit:10,$sort:{time:-1}}}).then(function(t){s.a.forEach(t.data,function(t){var o=s.a.find(n.points,{id:t.id});if(o)t.time>o.time&&(n.points=s.a.reject(n.points,{id:t.id}),n.points.push(t),n.show&&n.handleInfoWindow(t));else{var i=s.a.find(n.$store.state.list,{id:t.id});i&&n.points.push(t)}})}).catch(function(t){n.$Message.error({content:"刷新位置错误："+t,duration:10,closable:!0})})},1e3)},methods:{handleInfoWindow:function(n){this.show=!0,this.pointInfo=s.a.find(this.points,{id:n.id})},infoWindowClose:function(){this.show=!1},infoWindowOpen:function(){this.show=!0}}},d=p,f=(o("744d"),o("2877")),h=Object(f["a"])(d,i,a,!1,null,"61c63496",null);h.options.__file="baiduRealTime.vue";var u=h.exports,_=function(){var n=this,t=n.$createElement,o=n._self._c||t;return o("div",[o("baidu-map",{staticClass:"bm-view",style:{paddingRight:n.paddingRight},attrs:{center:n.center,zoom:n.zoom,"scroll-wheel-zoom":!0,"continuous-zoom":!0}},[o("bm-map-type",{attrs:{"map-types":["BMAP_NORMAL_MAP","BMAP_HYBRID_MAP"],anchor:"BMAP_ANCHOR_TOP_LEFT"}}),o("bm-scale",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_LEFT"}}),o("bm-geolocation",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT",showAddressBar:!0,autoLocation:!0}}),o("bm-panorama"),n.clear?o("bm-polyline",{attrs:{path:n.polylinePath,"stroke-color":"red","stroke-opacity":.5,"stroke-weight":3}}):n._e(),n._l(n.polylinePath,function(t,i){return o("bm-marker",{key:i,attrs:{position:{lng:t.lng,lat:t.lat},title:t.id,icon:{url:n.config.url+"/img/point.png",size:{width:32,height:32}}},on:{click:function(o){n.handleInfoWindow(t)}}})}),n.clear?o("bm-marker",{attrs:{position:n.polyStartEnd.end,rotation:-35,zIndex:-1,icon:{url:n.config.url+"/img/end.png",size:{width:48,height:48},opts:{anchor:{width:35,height:40}}}}},[n.clear?o("bm-marker",{attrs:{position:n.polyStartEnd.start,rotation:35,zIndex:-1,icon:{url:n.config.url+"/img/start.png",size:{width:48,height:48},opts:{anchor:{width:15,height:40}}}}}):n._e()],1):n._e(),o("bm-info-window",{attrs:{position:{lng:n.pointInfo.lng,lat:n.pointInfo.lat},show:n.show,title:"设备号："+n.pointInfo.id,offset:{width:3,height:-3}},on:{close:n.infoWindowClose,open:n.infoWindowOpen}},[o("span",{staticClass:"point-span"},[o("Row",[o("Col",{attrs:{span:"18"}},[n._v("\n          时间："+n._s(n.pointInfo.time)+"\n          ")]),o("Col",{attrs:{span:"6"}},[n._v("\n          定位："+n._s(n.pointInfo.qf)+"\n          ")])],1),o("Row",[o("Col",{attrs:{span:"12"}},[n._v("\n          经度："+n._s(n.pointInfo.lng)+"\n          ")]),o("Col",{attrs:{span:"12"}},[n._v("\n          纬度："+n._s(n.pointInfo.lat)+"\n          ")])],1),o("Row",[o("Col",{attrs:{span:"8"}},[n._v("\n          高度："+n._s(n.pointInfo.alt)+"\n          ")]),o("Col",{attrs:{span:"8"}},[n._v("\n          速度："+n._s(n.pointInfo.speed)+"\n          ")]),o("Col",{attrs:{span:"8"}},[n._v("\n          方向："+n._s(n.pointInfo.track_true)+"\n          ")])],1)],1)])],2)],1)},m=[],g={props:{paddingRight:{type:String,default:"200px"}},data:function(){return{center:{lng:116.404,lat:39.915},zoom:15,show:!1,pointInfo:"",polyStartEnd:{start:"",end:""},clear:!0,config:l}},mounted:function(){var n=this;r["a"].$on("history-clicked",function(t){n.center={lng:t.lng,lat:t.lat},n.handleInfoWindow(t)}),r["a"].$on("history-clear",function(){n.clear=!1,n.show=!1})},methods:{handleInfoWindow:function(n){this.show=!0,this.pointInfo=n},infoWindowClose:function(){this.show=!1},infoWindowOpen:function(){this.show=!0}},computed:{polylinePath:function(){var n=this.$store.state.historyList;if(n[0]){this.clear=!0,this.polyStartEnd.end=n[0],this.center={lng:n[0].lng,lat:n[0].lat};var t=n.length;this.polyStartEnd.start=n[t-1]}return n}}},w=g,v=(o("e939"),Object(f["a"])(w,_,m,!1,null,"97078afa",null));v.options.__file="baiduHistory.vue";var I=v.exports;o.d(t,"a",function(){return I}),o.d(t,"b",function(){return u})},"48de":function(n,t,o){"use strict";var i=o("bb13"),a=o.n(i);a.a},"744d":function(n,t,o){"use strict";var i=o("21d5"),a=o.n(i);a.a},"7f74":function(n,t,o){"use strict";o.r(t);var i=function(){var n=this,t=n.$createElement,o=n._self._c||t;return o("div",[o("baidu-real-time")],1)},a=[],e=(o("cadf"),o("551c"),o("097d"),o("29f4")),s={components:{BaiduRealTime:e["b"]}},r=s,l=(o("48de"),o("2877")),c=Object(l["a"])(r,i,a,!1,null,"bc3502c0",null);c.options.__file="RealTime.vue";t["default"]=c.exports},aaf1:function(n,t,o){},bb13:function(n,t,o){},e939:function(n,t,o){"use strict";var i=o("aaf1"),a=o.n(i);a.a}}]);
//# sourceMappingURL=chunk-3e82feba.cd8a5475.js.map