(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d0b06b0"],{"0043":function(t,n,o){"use strict";var i=o("ab0d"),s=o.n(i);s.a},"066b":function(t,n,o){"use strict";var i=o("7e7a"),s=o.n(i);s.a},"29f4":function(t,n,o){"use strict";var i=function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",[o("baidu-map",{staticClass:"bm-view",style:{paddingRight:t.paddingRight},attrs:{center:t.center,zoom:t.zoom,"scroll-wheel-zoom":!0,"continuous-zoom":!0}},[o("bm-map-type",{attrs:{"map-types":["BMAP_NORMAL_MAP","BMAP_HYBRID_MAP"],anchor:"BMAP_ANCHOR_TOP_LEFT"}}),o("bm-scale",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_LEFT"}}),o("bm-geolocation",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT",showAddressBar:!0,autoLocation:!0}}),o("bm-panorama"),t._l(t.points,function(n,i){return o("bm-marker",{key:i,attrs:{position:{lng:n.lng,lat:n.lat},animation:"BMAP_ANIMATION_DROP",title:n.id,icon:t.icon},on:{click:function(o){return t.handleInfoWindow(n)}}})}),o("bm-info-window",{attrs:{position:{lng:t.pointInfo.lng,lat:t.pointInfo.lat},show:t.show,title:"姓名："+t.pointInfo.name,offset:{width:3,height:-15}},on:{close:t.infoWindowClose,open:t.infoWindowOpen}},[o("span",{staticClass:"point-span"},[o("Row",[o("Col",[t._v("时间："+t._s(t.pointInfo.time))])],1),o("Row",[o("Col",{attrs:{span:"16"}},[t._v("设备号："+t._s(t.pointInfo.id))]),o("Col",{attrs:{span:"8"}},[t._v("定位："+t._s(t.pointInfo.qf))])],1),o("Row",[o("Col",{attrs:{span:"12"}},[t._v("经度："+t._s(t.pointInfo.lng))]),o("Col",{attrs:{span:"12"}},[t._v("纬度："+t._s(t.pointInfo.lat))])],1),o("Row",[o("Col",{attrs:{span:"8"}},[t._v("高度："+t._s(t.pointInfo.alt))]),o("Col",{attrs:{span:"8"}},[t._v("速度："+t._s(t.pointInfo.speed))]),o("Col",{attrs:{span:"8"}},[t._v("方向："+t._s(t.pointInfo.track_true))])],1)],1)])],2)],1)},s=[],a=(o("7f7f"),o("ac6a"),o("7514"),o("b2e5")),e=o.n(a),r=o("c516"),c=o("4653"),l={props:{paddingRight:{type:String,default:"200px"}},data:function(){return{center:{lng:116.404,lat:39.915},zoom:15,points:[],show:!1,pointInfo:"",icon:{url:"http://".concat(document.location.host,"/img/online.png"),size:{width:32,height:32}}}},computed:{},created:function(){var t=this;c["a"].service("position").find({query:{$limit:1,$sort:{time:-1}}}).then(function(n){setTimeout(function(){t.center={lng:n.data[0].lng,lat:n.data[0].lat}},1e3)}).catch(function(n){t.$Message.error({content:"获取位置错误："+n,duration:10,closable:!0})})},mounted:function(){var t=this;r["a"].$on("device-selected",function(n){var o=e.a.find(t.points,{id:n.id});o?(t.center={lng:o.lng,lat:o.lat},t.zoom=19,t.handleInfoWindow(o)):t.$Message.error({content:"此用户无数据",duration:3,closable:!0})}),setInterval(function(){c["a"].service("position").find({query:{$limit:10,$sort:{time:-1}}}).then(function(n){e.a.forEach(n.data,function(n){var o=e.a.find(t.points,{id:n.id});if(o){if(n.time>o.time){t.points=e.a.reject(t.points,{id:n.id});var i=e.a.find(t.$store.state.list,{id:n.id});n.name=i.name,t.points.push(n),t.show&&t.handleInfoWindow(n)}}else{var s=e.a.find(t.$store.state.list,{id:n.id});s&&(n.name=s.name,t.points.push(n))}})}).catch(function(n){t.$Message.error({content:"刷新位置错误："+n,duration:10,closable:!0})})},2e3)},methods:{handleInfoWindow:function(t){this.show=!0,this.pointInfo=e.a.find(this.points,{id:t.id})},infoWindowClose:function(){this.show=!1},infoWindowOpen:function(){this.show=!0}}},p=l,h=(o("066b"),o("2877")),d=Object(h["a"])(p,i,s,!1,null,"290bf8e1",null),f=d.exports,u=function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",[o("baidu-map",{staticClass:"bm-view",style:{paddingRight:t.paddingRight},attrs:{center:t.center,zoom:t.zoom,"scroll-wheel-zoom":!0,"continuous-zoom":!0}},[o("bm-map-type",{attrs:{"map-types":["BMAP_NORMAL_MAP","BMAP_HYBRID_MAP"],anchor:"BMAP_ANCHOR_TOP_LEFT"}}),o("bm-scale",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_LEFT"}}),o("bm-geolocation",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT",showAddressBar:!0,autoLocation:!0}}),o("bm-panorama"),t.showLine?o("bm-polyline",{attrs:{path:t.path,"stroke-color":"red","stroke-opacity":1,"stroke-weight":3}}):t._e(),t.showLine?o("bml-lushu",{attrs:{path:t.path,icon:t.iconPerson,play:t.play,speed:t.speed},on:{start:t.start,stop:t.stop,pause:t.pause}}):t._e(),t.showLine?o("bm-marker",{attrs:{position:t.polyStartEnd.start,zIndex:-1,icon:t.iconStart}}):t._e(),t._v("s\n    "),t.showLine?o("bm-marker",{attrs:{position:t.polyStartEnd.end,zIndex:-1,icon:t.iconEnd}}):t._e(),o("bm-info-window",{attrs:{position:{lng:t.pointInfo.lng,lat:t.pointInfo.lat},show:t.show,title:"姓名："+t.pointInfo.name,offset:{width:3,height:-3}},on:{close:t.infoWindowClose,open:t.infoWindowOpen}},[o("span",{staticClass:"point-span"},[o("Row",[o("Col",[t._v("时间："+t._s(t.pointInfo.time))])],1),o("Row",[o("Col",{attrs:{span:"16"}},[t._v("设备号："+t._s(t.pointInfo.id))]),o("Col",{attrs:{span:"8"}},[t._v("定位："+t._s(t.pointInfo.qf))])],1),o("Row",[o("Col",{attrs:{span:"12"}},[t._v("经度："+t._s(t.pointInfo.lng))]),o("Col",{attrs:{span:"12"}},[t._v("纬度："+t._s(t.pointInfo.lat))])],1),o("Row",[o("Col",{attrs:{span:"8"}},[t._v("高度："+t._s(t.pointInfo.alt))]),o("Col",{attrs:{span:"8"}},[t._v("速度："+t._s(t.pointInfo.speed))]),o("Col",{attrs:{span:"8"}},[t._v("方向："+t._s(t.pointInfo.track_true))])],1)],1)])],1)],1)},m=[],_=o("cebc"),w=o("2f62"),g=o("bd0c"),b={props:{paddingRight:{type:String,default:"200px"}},components:{BmlLushu:g["BmlLushu"]},data:function(){return{center:{lng:116.404,lat:39.915},zoom:15,show:!1,showLine:!1,pointInfo:"",polyStartEnd:{start:"",end:""},play:!1,iconPerson:{url:"http://".concat(document.location.host,"/img/person.png"),size:{width:32,height:32},opts:{anchor:{width:16,height:32}}},iconEnd:{url:"http://".concat(document.location.host,"/img/end.png"),size:{width:48,height:48},opts:{anchor:{width:24,height:40}}},iconStart:{url:"http://".concat(document.location.host,"/img/start.png"),size:{width:48,height:48},opts:{anchor:{width:24,height:40}}},speed:2e3}},mounted:function(){var t=this;r["a"].$on("history-clicked",function(n){t.center={lng:n.lng,lat:n.lat},t.zoom=17;var o=e.a.find(t.$store.state.list,{id:n.id});n.name=o.name,t.handleInfoWindow(n)}),r["a"].$on("history-clear",function(){t.show=!1,t.showLine=!1,t.polyStartEnd={}}),r["a"].$on("history-select-done",function(){t.historyList[0]&&(t.center={lng:t.historyList[0].lng,lat:t.historyList[0].lat},t.zoom=17,t.polyStartEnd.start=t.historyList[0],t.polyStartEnd.end=t.historyList[t.historyList.length-1],t.showLine=!0)}),r["a"].$on("history-play",function(){t.start()}),r["a"].$on("history-stop",function(){t.stop()}),r["a"].$on("history-pause",function(){t.pause()})},methods:{handleInfoWindow:function(t){this.show=!0,this.pointInfo=t},infoWindowClose:function(){this.show=!1},infoWindowOpen:function(){this.show=!0},start:function(){this.play=!0},stop:function(){this.play=!1},pause:function(){this.play=!1}},computed:Object(_["a"])({},Object(w["c"])(["historyList"]),{path:function(){var t=[];return e.a.forEach(this.historyList,function(n){n&&t.push({lng:n.lng,lat:n.lat})}),t}})},v=b,I=(o("0043"),Object(h["a"])(v,u,m,!1,null,"1b5f2fe5",null)),y=I.exports;o.d(n,"a",function(){return y}),o.d(n,"b",function(){return f})},"7e7a":function(t,n,o){},"7f74":function(t,n,o){"use strict";o.r(n);var i=function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",[o("baidu-real-time")],1)},s=[],a=o("29f4"),e={components:{BaiduRealTime:a["b"]}},r=e,c=o("2877"),l=Object(c["a"])(r,i,s,!1,null,"bc3502c0",null);n["default"]=l.exports},ab0d:function(t,n,o){}}]);
//# sourceMappingURL=chunk-0d0b06b0.a09e8f59.js.map